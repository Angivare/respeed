server {
  server_name respeed.dev respeed.192.168.1.2.xip.io;
  root /home/alex/respeed/website/public;

  index index.php;
  
  rewrite ^/([0-9]+)$ /index.php?forum=$1;
  rewrite ^/([0-9]+)-([a-z0-9-]+)$ /index.php?forum=$1&slug=$2;
  rewrite ^/([0-9]+)-([a-z0-9-]+)/([0-9]+)$ /index.php?forum=$1&slug=$2&page=$3;
  
  rewrite ^/([0-9]+)/([0-9]+)-([a-z0-9-]+)$ /index.php?forum=$1&topic=$2&slug=$3;
  rewrite ^/([0-9]+)/([0-9]+)-([a-z0-9-]+)/([0-9]+)$ /index.php?forum=$1&topic=$2&slug=$3&page=$4;
  
  rewrite ^/se_connecter$ /index.php?login;
  
  rewrite ^/mp$ /index.php?mp;
  rewrite ^/mp/([0-9]+)$ /index.php?mp=$1;
  rewrite ^/mp/([0-9]+)/([0-9]+)$ /index.php?mp=$1&id=$2;

  rewrite ^/style-([0-9]+)\.css$ /style.css;

  location ~ \.php$ {
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    include fastcgi_params;
  }

  access_log /var/log/nginx/respeed.access.log;
  error_log /var/log/nginx/respeed.error.log;
}
